# سیستم مدیریت یادداشت‌ها با PHP

این پروژه یک سیستم ساده برای مدیریت کاربران و یادداشت‌هاست که با زبان PHP و پایگاه‌داده MySQL پیاده‌سازی شده است. پروژه دارای دو نوع کاربر است: مدیر (admin) و کاربر معمولی (user). مدیر می‌تواند کاربران و ادمین‌ها را مدیریت کند و برای آن‌ها یادداشت ثبت کند. کاربران فقط می‌توانند پروفایل و یادداشت‌های خودشان را مشاهده کنند.

## ✨ قابلیت‌ها

* ورود و خروج جداگانه برای مدیر (admin) و کاربر (user)
* مدیریت کامل کاربران (افزودن، ویرایش، حذف)
* **مدیریت ادمین‌ها فقط توسط Superadmin** (افزودن، ویرایش، حذف)
* تعیین دسته‌بندی‌های مجاز برای هر ادمین (Allowed Categories)
* **کنترل دسترسی بر اساس دسته‌بندی**: هر ادمین فقط به کاربران و یادداشت‌هایی که در دسته‌های مجازش هستند دسترسی دارد
* ثبت، ویرایش و حذف یادداشت‌ها برای کاربران توسط ادمین
* مشاهده یادداشت‌های هر کاربر با کنترل دقیق سطح دسترسی
* محدودسازی دسترسی صفحات با توجه به نقش کاربر (user / admin / superadmin) با استفاده از توابع `auth.php`
* استفاده از `password_hash` برای ذخیره امن رمز عبورها
* رابط کاربری ساده و قابل توسعه
* ساختار پوشه‌ای مرتب و مقیاس‌پذیر

---

## 🗂️ ساختار پوشه‌ها

```plaintext
+---actions
¦       add_admin.php
¦       add_note.php
¦       add_user.php
¦       admin_login.php
¦       delete_admin.php
¦       delete_note.php
¦       delete_user.php
¦       edite_admin.php
¦       edite_note.php
¦       edit_user.php
¦       logout.php
¦       user_login.php
¦       report_bug.php
+---config
¦       db.php
+---includes
¦       auth.php
¦       footer.php
¦       header.php
¦       jdf.php
+---pages
¦       admins.php
¦       admin_form.php
¦       admin_login_form.php
¦       edite_admin_form.php
¦       edite_user_form.php
¦       users.php
¦       user_form.php
¦       user_login_form.php
¦       user_notes.php
+---public
¦   ¦   dashbord.php
¦   ¦   index.php
¦   ¦   user_profile.php
¦   +---assets
¦       +---css
+---sql
        create_superadmin.php
        crud.sql
```

---

## 🛠️ نحوه اجرا روی هر سیستم

### ۱. پیش‌نیازها

* نصب PHP (ترجیحاً نسخه ۷.۴ یا بالاتر)
* نصب MySQL
* نصب یک وب‌سرور مانند XAMPP یا MAMP یا استفاده از PHP Built-in Server

### ۲. مراحل اجرا

#### الف) کلون یا کپی پروژه

```bash
git clone https://github.com/ka1antarBAB/ClientLog-v1.git
```

یا پروژه را به صورت دستی در مسیر وب‌سرور خود قرار دهید (مثلاً در XAMPP مسیر: `htdocs/`).

#### ب) ساخت پایگاه‌داده

1. وارد phpMyAdmin شوید.
2. یک دیتابیس جدید با نام دلخواه ایجاد کنید (مثلاً: `crud_system`).
3. فایل `sql/crud.sql` را ایمپورت کنید تا جداول ساخته شوند.

#### پ) تنظیم اتصال پایگاه‌داده

فایل `config/db.php` را باز کرده و اطلاعات دیتابیس را وارد کنید:

```php
$pdo = new PDO("mysql:host=localhost;dbname=crud_system", "root", "");
```

(در صورت نیاز، نام کاربری و رمز عبور را تغییر دهید.)

---

## 👤 ایجاد SuperAdmin اولیه

پس از ساخت جداول پایگاه‌داده، برای ایجاد اولین کاربر با نقش `superadmin`، مراحل زیر را دنبال کنید:

1. فایل `sql/create_superadmin.php` را باز کرده و در صورت نیاز، مقدارهای پیش‌فرض آن (نام کاربری، رمز عبور، نام کامل و...) را تغییر دهید.

2. مرورگر را باز کرده و این مسیر را اجرا کنید:

   ```
   http://localhost/your-project/sql/create_superadmin.php
   ```

3. در صورت موفقیت، پیام `✅ Superadmin created successfully` نمایش داده می‌شود.

4. برای امنیت بیشتر، پس از ساخت ادمین می‌توانید این فایل را حذف یا تغییر نام دهید.

> رمز عبور به‌صورت امن با `password_hash` در دیتابیس ذخیره می‌شود و آماده ورود به پنل مدیریت است.

---

## 🔑 دسترسی‌ها

* پس از ورود موفق مدیر (admin) یا سوپرادمین (superadmin) با اطلاعات ایجادشده، به صفحات مدیریت متناسب با نقش خود دسترسی خواهید داشت.
* کاربران معمولی (user) فقط می‌توانند پروفایل و یادداشت‌های خود را مشاهده کنند.

---

## 📌 نکات مهم

* حتماً از `includes/auth.php` در ابتدای صفحاتی که نیاز به احراز هویت دارند استفاده کنید.
* برای صفحات ویژه Superadmin، از تابع `require_superadmin()` در `auth.php` بهره ببرید.
* تمام رمزهای عبور در دیتابیس باید با `password_hash` ذخیره شوند.
* پروژه فعلاً فاقد رابط گرافیکی پیشرفته است و بیشتر بر منطق بک‌اند تمرکز دارد.

---

## ✍️ نویسنده

* احسان ملک – توسعه‌دهنده بک‌اند با علاقه‌ به پروژه‌های ساده و قابل یادگیری
